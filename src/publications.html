<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Publications | Detester Magazine</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
    rel="stylesheet"
  />
  <link rel="stylesheet" href="scss/style.scss" />

  <link rel="apple-touch-icon" sizes="180x180" href="media/Favicons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="media/Favicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="media/Favicons/favicon-16x16.png">
  <link rel="manifest" href="media/Favicons/site.webmanifest">
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script>
    $(function () {
      $("#nav-header").load("/components/header.html");
    });
    $(function () {
      $("#footer").load("/components/footer.html");
    });
  </script>
</head>

<body>
  <div id="nav-header"></div>

  <section class="header">
    <div class="header-fill"></div>
    <div class="vectorbox">
      <img src="media/Vector/Header.png" alt="" class="headervector" />
    </div>
    <div class="header-title">
      <div>Publications</div>
    </div>
  </section>
  <section class="page-content publications">
    <div class="page-section gallery">
    
      <div id="myBtnContainer">
        <div id="all" class="btn active" onclick="paginate('all')"> Show all</div>
        <div id="artSubmissions" class="btn" onclick="paginate('artSubmissions')"> Art</div>
        <div id="articles" class="btn" onclick="paginate('articles')"> Articles</div>
        <div id="featuredSubmissions" class="btn" onclick="paginate('featuredSubmissions')"> Featured Submissions</div>
        <div id="poetry" class="btn" onclick="paginate('poetry')"> Poetry</div>
        <div id="interviews" class="btn" onclick="paginate('interviews')"> Interviews</div>
        <div id="photography" class="btn" onclick="paginate('photography')"> Photography</div>
        <div id="creativeWriting" class="btn" onclick="paginate('creativeWriting')"> Creative Writing</div>
      </div>
    
      <div id="container" class="container"></div>
    
      <ul id="page-nav" class="anav nav-pills justify-content-end"></ul>
    

    
    </div>
  </section>

  <div id="footer"></div>
  <script src="js/index.js"></script>

  <script>
    window.current = "all"; // Change so I can push

    function paginate(filter = "all") {
      displaying = 0;

      document.getElementById("container").innerHTML = "";
      document.getElementById("page-nav").innerHTML = "";

      let xhttp = new XMLHttpRequest();

      xhttp.onreadystatechange = function () {
        if (this.readyState == 4 && this.status == 200) {
          var htmlStr = this.responseText;

          const parseHTMLString = (() => {
            const parser = new DOMParser();
            return str => parser.parseFromString(str, "text/html");
          })();

          const paginateDoc = doc => {
            var data = doc.body.children;

            var tempD = []

            for (i in data) {
              tempD.push(data[i]);
            }

            if (filter != "all") {
              data = tempD.filter(function (datum) {
                var classes = [];

                for (i in datum.classList) {
                  classes.push(datum.classList[i]);
                }

                return classes.includes(filter);
              });
            }

            if (current != filter) {
              document.getElementById(current).classList.remove("active");
              document.getElementById(filter).classList.add("active");

              current = filter;
            }

            var t = 0;

            for (i = 0; i < Math.ceil(data.length / 15); i++) {
              var newPage = ``;

              for (j = 0; j < 15; j++) {
                var k = j + t;

                if (data[k] != undefined && data[k] != null && data[k] != "") {
                  data[k].classList.add("publications-page-" + i);

                  if (i != 0) {
                    data[k].style.display = "none";
                  } else {
                    data[k].style.display = "inline-grid";
                  }

                  newPage += data[k].outerHTML;
                }

              }

              if (i == 0) {
                var newNav = `
                <li class="nav-item" style="cursor: pointer; display: inline;">
                  <a class="nav-link active" id="pageLink${i}" onclick="pageNavigate(${i})">${i + 1}</a>
                </li>
              `;
              } else {
                var newNav = `
                <li class="nav-item" style="cursor: pointer; display: inline;">
                  <a class="nav-link" id="pageLink${i}" onclick="pageNavigate(${i})">${i + 1}</a>
                </li>
              `;
              }

              document.getElementById("container").innerHTML += newPage;
              document.getElementById("page-nav").innerHTML += newNav;

              t += 15;
            }
          };

          const execute = (str, query) => {
            const htmlDoc = parseHTMLString(str);
            paginateDoc(htmlDoc);
          };

          execute(htmlStr);
        }
      };

      xhttp.open("GET", `publicationData.html`, true);
      xhttp.send();
    }

    setInterval(function() {
      if (matchMedia && document.getElementById("non-square") && document.getElementById("non-square").style.height != document.getElementById("non-square").offsetWidth) {
        window.mq = window.matchMedia("(min-width: 100px)");

        mq.addListener(orientationChange);
        orientationChange()
      }

      function orientationChange() {
        document.getElementById("non-square").style.height = document.getElementById("non-square").offsetWidth;
      }
    }, 750);

    window.displaying = 0;

    function pageNavigate(number) {
      if (displaying != number) {
        var elementsToHide = document.getElementsByClassName("publications-page-" + displaying);
        for (i = 0; i < elementsToHide.length; i++) {
          elementsToHide[i].style.display = "none";
        }

        var elementsToShow = document.getElementsByClassName("publications-page-" + number);
        for (i = 0; i < elementsToShow.length; i++) {
          elementsToShow[i].style.display = "inline-grid";
        }

        document.getElementById("pageLink" + displaying).classList.remove("active");
        document.getElementById("pageLink" + number).classList.add("active");

        displaying = number;

        window.scrollTo(0, 0);
      }
    }

    paginate('all');
  </script>
</body>

</html>
